
  <h1 class = "index-page-title">Choose or <%= link_to "create", new_challenge_path %> a challenge <%= image_tag "ecopal_marker.png" %></h1>



<div class="index-page-flex">

  <div class="cards">
  <% @challenges.each do |challenge| %>
    <div class="flip-container" ontouchstart="this.classList.toggle('hover');">
        <div class="flipper">
            <div class="front">
               <div class="card">
                  <div class="image-container">
                    <% if challenge.image.nil? || challenge.image.empty? %>
                     <%= cl_image_tag challenge.photo, alt: challenge.name, loading: 'lazy'  %>
                     <% else %>
                     <%= image_tag challenge.image, loading: 'lazy'%>
                    <% end %>
                  </div>
                  <div class="image-text">
                      <%= link_to challenge.name, challenge_path(challenge) %>
                  </div>
                </div>
            </div>
            <div class="back">
                <div class="card">
                  <div class="image-container" id = "image-container-flip">
                    <div class = "flip-text">
                        <p> <%= challenge.trackers.count %> ecopals are participating in this challenge!</p>
                      </div>
                  </div>
                  <div class="image-text">
                      <%= link_to "Find out more!", challenge_path(challenge) %>
                  </div>
                </div>
            </div>
        </div>
    </div>
    <% end %>
  </div>
  <br>


  <div class="leaderboard">
    <div class="top-five">
      <h4><%= image_tag "crowns.png" %> Leaderboard</h4>
      <table>
        <% @top_five_users.each do |user| %>
          <tr>
            <th class = "avatar"><%= cl_image_tag user.image %></th>
            <th><%= link_to user.name, dashboard_path(user: user.id) %></th>
            <th><%= user.score %></th>
          </tr>
        <% end %>
      </table>
    </div>
  </div>
</div>


